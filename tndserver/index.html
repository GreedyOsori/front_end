<!DOCTYPE html>
<html>
    <head>
        <style type="text/css">
            #navigation li {
                list-style:none;
				width:100px;
                padding:5px;
            }
            #navigation {
                cursor:pointer;
            }
            #navigation .selected {
                background-color:red;
                color:white;
            }
        </style>
    </head>
    <body>
<!--
		<input type="test" id="inputName" />
		<button id="btnName">Click me!</button></br>
		<input type="test" id="removeName" />
		<button id="btnRemove">remove</button></br>
        <button id="Submit" disabled="">submit</button>

		<script type="text/javascript">
			var list = [];
			for (var i=0; i<list.length; i++){
				$('<li />', {html: list[i]}).bind('click',clickHandler).appendTo('#navigation')
			}

			$('#btnName').click(function(){
				var nav = document.getElementById('navigation');
				var text = $('#inputName').val();
				for(var i=0; i<nav.childNodes.length; i++){
					var child = nav.childNodes[i];
					if(text == child.innerText)
						return;
				}
				if(text.length){
					$('<li />', {html: text}).bind('click',clickHandler).appendTo('#navigation')
					list.push(text);
				}
			});

			$('#btnRemove').click(function(){
                var nav = document.getElementById('navigation');
				var text = $('#removeName').val();
				for(var i=0; i<nav.childNodes.length; i++){
					var child = nav.childNodes[i];
					if(text == child.innerText){
						child.remove();
						list.splice((i-1),1);
					}
				}
			});

            function clickHandler(event) {
                var nav = document.getElementById('navigation');
                var count = 0;
                var button = document.getElementById('Submit');
                button.disabled='disabled';
                for(var i = 0; i < nav.childNodes.length; i++) {
                    var child = nav.childNodes[i];
                    if(child.nodeType==3)
                        continue;
                    if (child.className == 'selected')
                        count++;
                }
                if (event.target.className == 'selected'){
                    event.target.className = '';
                    count--;
                }
                else {
                    if (count<2){
                        event.target.className = 'selected';
                        count++;
                    }
                }
                if (count>=2)
                    button.removeAttribute('disabled');

            }
        </script>
-->
        <br><br>
        <input type="button" id="id_conn_btn" value="connect websocket" />
        <input type="text" id="id_conn_id" />
        <br>
        <ul id="navigation">
        </ul>
        <br>
        <div id="id_messages" style="height:200px;width:500px;background:black;color:white;overflow-y:auto;"></div>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
        <script type="text/javascript">
            var messageContainer = document.getElementById('id_messages');

            if ("WebSocket" in window) {
                var btnConn = document.getElementById('id_conn_btn');
                var textID = document.getElementById('id_conn_id');
                var message = "";

                messageContainer.innerHTML = "WebSocket is supported by your Browser!";
                var ws = new WebSocket("ws://localhost:8888/websocket");
                ws.onmessage = function (evt) {
                    var received_msg = evt.data;
                    message += ">> " + received_msg + "<br>";
                    messageContainer.innerHTML = message;

                    var data = jQuery.parseJSON(received_msg);

                    console.log(data.msg);
                    console.log(data.num);
                    console.log(data.users);

                    $.each(data.users, function(key) {
                        console.log(data.users[key]);
                    })
                };

                <!-- connect websocket button handler -->
                btnConn.addEventListener('click', function(){
                    var json = new Object();
                    json.msg = "request_user_list";
                    json.id = textID.value;
                    var req = JSON.stringify(json);
                    ws.send( req );
                });

                ws.onclose = function() {
                        message = "";
                        messageContainer.innerHTML = "Connection is closed...";
                    }
            }
            else
            {
                messageContainer.innerHTML = "WebSocket NOT supported by your Browser!";
            }
        </script>
    </body>
</html>